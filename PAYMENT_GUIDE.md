# 💳 支付功能使用指南

## 🎯 现在已经支持真实信用卡支付！

这个应用现在已经完全配置为支持真实的信用卡支付处理。以下是如何使用的详细说明：

## 🚀 快速开始

### 1. 一键设置（推荐）

```bash
# Linux/macOS
./setup.sh
```

### 2. 手动设置

```bash
# 1. 安装依赖
npm install

# 2. 配置前端环境变量
cp env.example .env
# 编辑 .env 文件，添加你的 Stripe 可发布密钥

# 3. 设置后端
cd server
npm install
echo "STRIPE_SECRET_KEY=your_secret_key_here" > .env

# 4. 启动后端（新终端）
npm start

# 5. 启动前端（新终端）
cd ..
npm start
```

## 🔑 获取 Stripe 密钥

1. 访问 [Stripe 仪表板](https://dashboard.stripe.com/apikeys)
2. 复制以下密钥：
   - **可发布密钥** (pk_test_... 或 pk_live_...)：用于前端
   - **密钥** (sk_test_... 或 sk_live_...)：用于后端

## 💳 测试信用卡支付

使用以下测试卡号：

### ✅ 成功支付
- **卡号**: `4242 4242 4242 4242`
- **过期日期**: 任何未来日期（如 `12/25`）
- **CVC**: 任何 3 位数字（如 `123`）

### ❌ 被拒绝的卡
- **卡号**: `4000 0000 0000 0002`
- **过期日期**: 任何未来日期
- **CVC**: 任何 3 位数字

### 🔐 需要身份验证
- **卡号**: `4000 0027 6000 3184`
- **过期日期**: 任何未来日期
- **CVC**: 任何 3 位数字

### 💰 余额不足
- **卡号**: `4000 0000 0000 9995`
- **过期日期**: 任何未来日期
- **CVC**: 任何 3 位数字

## 🌍 多币种支持

应用支持以下币种：

- **USD** - 美元 ($29.99)
- **EUR** - 欧元 (€27.99)
- **CNY** - 人民币 (¥199.99)
- **JPY** - 日元 (¥3999)
- **GBP** - 英镑 (£24.99)

## 🌐 多语言支持

支持 4 种语言：

- 🇺🇸 **English**
- 🇨🇳 **中文**
- 🇪🇸 **Español**
- 🇫🇷 **Français**

## 🔒 安全功能

- ✅ **PCI DSS 合规**: 所有支付数据通过 Stripe 处理
- ✅ **3D Secure**: 支持额外身份验证
- ✅ **欺诈检测**: Stripe 内置欺诈保护
- ✅ **加密传输**: 所有数据 HTTPS 加密

## 📱 支持的支付方式

- 💳 **信用卡/借记卡**: Visa、Mastercard、American Express
- 📱 **数字钱包**: Apple Pay、Google Pay
- 🏦 **银行转账**: 根据地区支持
- 💰 **本地支付方式**: 支持各国本地支付

## 🎛️ 实时支付状态

应用实时显示支付状态：

1. **处理中** - 支付正在处理
2. **成功** - 支付完成，订单确认
3. **需要操作** - 需要用户验证（如短信验证）
4. **失败** - 支付被拒绝，显示错误信息

## 🔧 生产环境配置

### 安全检查清单

- [ ] 使用生产环境的 Stripe 密钥
- [ ] 启用 HTTPS
- [ ] 配置适当的 CORS 策略
- [ ] 设置 webhook 处理支付状态更新
- [ ] 添加日志记录和监控
- [ ] 实施速率限制

### 部署建议

```bash
# 前端构建
npm run build

# 后端部署到云服务
# 确保设置环境变量：
# STRIPE_SECRET_KEY=sk_live_your_live_secret_key
# NODE_ENV=production
```

## 🆘 故障排除

### 常见问题

**Q: 支付一直显示"处理中"**
A: 检查后端是否正在运行，确保 API 端点正确配置

**Q: "Invalid API key" 错误**
A: 确保环境变量中的 Stripe 密钥正确设置

**Q: 卡片被拒绝**
A: 使用测试卡号，确保过期日期是未来日期

**Q: 多语言不显示**
A: 检查 i18n 配置文件是否正确加载

### 调试步骤

1. 检查浏览器控制台是否有错误
2. 确认后端 API 正在运行 (http://localhost:3001)
3. 验证 Stripe 密钥是否正确
4. 检查网络请求是否成功

## 📞 支持

如果遇到问题：

1. 查看 [Stripe 文档](https://stripe.com/docs)
2. 检查 [测试卡号](https://stripe.com/docs/testing)
3. 访问 [Stripe 仪表板](https://dashboard.stripe.com/) 查看支付日志

---

**现在你可以使用真实的信用卡进行测试支付了！** 🎉

> 注意：在测试模式下不会产生真实费用。只有在生产模式下才会实际收费。 